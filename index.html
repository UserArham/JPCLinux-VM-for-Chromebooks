<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>v86 Multi-OS Launcher</title>
<style>
body { background: #008080; font-family: Tahoma, sans-serif; color: white; text-align: center; margin:0; }
header { background: #000080; padding: 10px; font-size: 24px; font-weight: bold; }
select, button { margin: 6px; padding: 8px 12px; font-weight: bold; cursor: pointer; }
#vm { width: 800px; height: 600px; margin: 20px auto; border: 4px solid #808080; background: black; }
</style>
</head>
<body>

<header>v86 Multi-OS Launcher</header>

<select id="os-select" style="width: 80%; max-width: 600px;"></select><br>
<button onclick="bootSelected()">Boot</button>
<button onclick="bootNext()">Next OS</button>
<button onclick="stopVM()">Stop</button>

<div id="vm"></div>

<script src="libv86.js"></script>
<script>
const OS_LIST = [
    // DOS / Windows
    { name: "86-DOS", file: "images/86dos.img", memory: 8 },
    { name: "MS-DOS 4", file: "images/msdos4.img", memory: 8 },
    { name: "MS-DOS 6.22", file: "images/msdos622.img", memory: 16 },
    { name: "FreeDOS", file: "images/freedos.img", memory: 16 },
    { name: "FreeGEM", file: "images/freegem.img", memory: 16 },
    { name: "Windows 1.01", file: "images/windows101.img", memory: 8 },
    { name: "Windows 2.03", file: "images/windows203.img", memory: 8 },
    { name: "Windows 3.0", file: "images/windows30.img", memory: 16 },
    { name: "Windows 3.1", file: "images/windows31.img", memory: 16 },
    { name: "Windows 95", file: "images/windows95.iso", memory: 64 },
    { name: "Windows 98", file: "images/windows98.iso", memory: 64 },
    { name: "PC-MOS/386", file: "images/pcmos386.img", memory: 16 },

    // Linux / BSD / Hurd / Plan9
    { name: "ELKS", file: "images/elks.img", memory: 16 },
    { name: "Buildroot Linux", file: "images/buildroot.iso", memory: 32 },
    { name: "TinyCore Linux", file: "images/tinycore.iso", memory: 32 },
    { name: "Minix", file: "images/minix3.iso", memory: 32 },
    { name: "NodeOS", file: "images/nodeos.iso", memory: 32 },
    { name: "Tilck", file: "images/tilck.iso", memory: 32 },
    { name: "FreeBSD", file: "images/freebsd.iso", memory: 32 },
    { name: "NetBSD", file: "images/netbsd.iso", memory: 32 },
    { name: "OpenBSD", file: "images/openbsd.iso", memory: 32 },
    { name: "Arch Hurd", file: "images/arch_hurd.iso", memory: 32 },
    { name: "9front", file: "images/9front.iso", memory: 32 },

    // Hobby / Bootsector / Custom
    { name: "Dino", file: "images/dino.img", memory: 8 },
    { name: "BootChess", file: "images/bootchess.img", memory: 8 },
    { name: "Floppy Bird", file: "images/floppy_bird.img", memory: 8 },
    { name: "Pillman", file: "images/pillman.img", memory: 8 },
    { name: "MikeOS", file: "images/mikeos.img", memory: 8 },
    { name: "NanoShell", file: "images/nanoshell.img", memory: 32 },
    { name: "Little Kernel", file: "images/little_kernel.img", memory: 32 },
    { name: "KolibriOS", file: "images/kolibri.img", memory: 32 },
    { name: "BoneOS", file: "images/boneos.img", memory: 32 },
    { name: "bootBASIC", file: "images/bootbasic.img", memory: 8 },
    { name: "bootRogue", file: "images/bootrogue.img", memory: 8 },
    { name: "bootLogo", file: "images/bootlogo.img", memory: 8 },

    // BeOS / AmigaOS / Windows-like
    { name: "BeOS 5", file: "images/beos5.iso", memory: 32 },
    { name: "Haiku", file: "images/haiku.iso", memory: 32 },
    { name: "ReactOS", file: "images/reactos.iso", memory: 32 },
    { name: "AROS Broadway", file: "images/aros.iso", memory: 32 },
    { name: "Tiny AROS", file: "images/tiny_aros.iso", memory: 32 }
];

// Populate dropdown
const select = document.getElementById("os-select");
OS_LIST.forEach((os, i) => {
    const option = document.createElement("option");
    option.value = i;
    option.textContent = os.name;
    select.appendChild(option);
});

let index = 0;
let emulator = null;

function startVM(os) {
    stopVM();
    emulator = new V86Starter({
        wasm_path: "v86.wasm",
        bios: { url: "bios/seabios.bin" },
        vga_bios: { url: "bios/vgabios.bin" },
        cdrom: os.file.endsWith(".iso") ? { url: os.file } : undefined,
        floppies: os.file.endsWith(".img") ? [{ url: os.file }] : undefined,
        screen_container: document.getElementById("vm"),
        memory_size: os.memory * 1024 * 1024,
        autostart: true
    });
}

function stopVM() {
    if (emulator) {
        emulator.stop();
        emulator = null;
        document.getElementById("vm").innerHTML = "";
    }
}

function bootSelected() {
    index = select.value;
    startVM(OS_LIST[index]);
}

function bootNext() {
    index = (index + 1) % OS_LIST.length;
    select.value = index;
    startVM(OS_LIST[index]);
}
</script>

</body>
</html>

